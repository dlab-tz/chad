(function(e){function t(t){for(var r,i,o=t[0],l=t[1],c=t[2],u=0,v=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&v.push(s[i][0]),s[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(v.length)v.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},s={app:0},n=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),s=a("bc3a"),n=a.n(s),i={},o=n.a.create(i);o.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=o,window.axios=o,Object.defineProperties(e.prototype,{axios:{get:function(){return o}},$axios:{get:function(){return o}}})},r["a"].use(Plugin);Plugin;var l=a("bb71");a("da64");r["a"].use(l["a"],{iconfont:"md"});var c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-toolbar",{attrs:{color:"indigo",dark:"",app:""}},[a("v-toolbar-title",{domProps:{textContent:e._s(e.title)}}),a("v-spacer"),e.$store.state.auth.token?a("v-toolbar-items",[e.$store.state.denyAccess?e._e():a("v-btn",{attrs:{flat:"",to:"Dashboard"}},[a("v-icon",[e._v("dashboard")]),e._v(" Home\n      ")],1),e.$store.state.denyAccess?e._e():a("v-btn",{attrs:{flat:"",to:"AddCHA"}},[a("v-icon",[e._v("add")]),e._v(" Add CHA\n      ")],1),e.$store.state.denyAccess?e._e():a("v-btn",{attrs:{flat:"",to:"AddHFS"}},[a("v-icon",[e._v("add")]),e._v(" Add HFS\n      ")],1),e.$store.state.denyAccess?e._e():a("v-menu",{attrs:{"open-on-hover":"",bottom:"","offset-y":""}},[a("v-btn",{attrs:{slot:"activator",flat:""},slot:"activator"},[a("v-icon",[e._v("perm_identity")]),e._v("Geographical Locations\n        ")],1),a("v-list",["Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{to:"addRegion"}},[a("v-list-tile-title",[a("v-icon",[e._v("add")]),e._v("Add Region\n            ")],1)],1):e._e(),"Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{to:"addDistrict"}},[a("v-list-tile-title",[a("v-icon",[e._v("add")]),e._v("Add District\n            ")],1)],1):e._e(),"Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{to:"addFacility"}},[a("v-list-tile-title",[a("v-icon",[e._v("add")]),e._v("Add Facility\n            ")],1)],1):e._e(),"Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{to:"addVillage"}},[a("v-list-tile-title",[a("v-icon",[e._v("add")]),e._v("Add Village\n            ")],1)],1):e._e()],1)],1),e.$store.state.denyAccess?e._e():a("v-menu",{attrs:{"open-on-hover":"",bottom:"","offset-y":""}},[a("v-btn",{attrs:{slot:"activator",flat:""},slot:"activator"},[a("v-icon",[e._v("list")]),e._v("Reports\n        ")],1),a("v-list",["Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{to:"RegionsReport"}},[a("v-list-tile-title",[a("v-icon",[e._v("list")]),e._v("Regions\n            ")],1)],1):e._e(),"Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{to:"DistrictsReport"}},[a("v-list-tile-title",[a("v-icon",[e._v("list")]),e._v("Districts\n            ")],1)],1):e._e(),"Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{to:"FacilitiesReport"}},[a("v-list-tile-title",[a("v-icon",[e._v("list")]),e._v("Facilities\n            ")],1)],1):e._e(),"Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{to:"VillagesReport"}},[a("v-list-tile-title",[a("v-icon",[e._v("list")]),e._v("Villages\n            ")],1)],1):e._e(),"Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{to:"CHAReport"}},[a("v-list-tile-title",[a("v-icon",[e._v("list")]),e._v("CHA\n            ")],1)],1):e._e(),"Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{to:"HFSReport"}},[a("v-list-tile-title",[a("v-icon",[e._v("list")]),e._v("HFS\n            ")],1)],1):e._e()],1)],1),e.$store.state.denyAccess?e._e():a("v-menu",{attrs:{"open-on-hover":"",bottom:"","offset-y":""}},[a("v-btn",{attrs:{slot:"activator",flat:""},slot:"activator"},[a("v-icon",[e._v("perm_identity")]),e._v("Account\n        ")],1),a("v-list",[a("v-tooltip",{attrs:{top:""}},["Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{slot:"activator",to:"addUser"},slot:"activator"},[a("v-list-tile-title",[a("v-icon",[e._v("perm_identity")]),e._v("Add User\n              ")],1)],1):e._e(),a("span",[e._v("Add a new user")])],1),a("v-tooltip",{attrs:{bottom:""}},["Admin"===e.$store.state.auth.role?a("v-list-tile",{attrs:{slot:"activator",to:"usersList"},slot:"activator"},[a("v-list-tile-title",[a("v-icon",[e._v("perm_identity")]),e._v("Users List\n              ")],1)],1):e._e(),a("span",[e._v("A list of users that can access the system")])],1),a("v-list-tile",{attrs:{to:"changePassword"}},[a("v-list-tile-title",[a("v-icon",[e._v("perm_identity")]),e._v("Change Password\n            ")],1)],1)],1)],1),e.$store.state.denyAccess?e._e():a("v-btn",{attrs:{flat:"",to:"Logout"}},[a("v-icon",[e._v("logout")]),e._v(" Logout\n      ")],1)],1):e._e(),a("v-spacer"),a("v-toolbar-items")],1),a("v-content",[a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.$store.state.dynamicProgress,callback:function(t){e.$set(e.$store.state,"dynamicProgress",t)},expression:"$store.state.dynamicProgress"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v("\n          "+e._s(e.$store.state.progressTitle)+"\n          "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.$store.state.dialogError,callback:function(t){e.$set(e.$store.state,"dialogError",t)},expression:"$store.state.dialogError"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n            "+e._s(e.$store.state.errorTitle)+"\n          ")])],1),a("v-card-text",[e._v("\n          "+e._s(e.$store.state.errorDescription)+"\n        ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.$store.state.dialogError=!1}}},[e._v("Ok")])],1)],1)],1),a("router-view")],1),a("v-footer",{attrs:{dark:"",color:"indigo",fixed:e.fixed,app:""}})],1)},d=[],u=a("2b27"),v=a.n(u),p="",m={name:"App",components:{},data:function(){return{title:"CHAID",fixed:!1}},created:function(){var e=this;v.a.get("token")&&v.a.get("userID")&&(this.$store.state.auth.token=v.a.get("token"),this.$store.state.auth.userID=v.a.get("userID"),this.$store.state.auth.username=v.a.get("username"),this.$store.state.auth.role=v.a.get("role"),n.a.get(p+"/isTokenActive/").then((function(t){e.$store.state.denyAccess=!1})))}},h=m,f=a("2877"),g=a("6544"),_=a.n(g),y=a("7496"),b=a("8336"),x=a("b0af"),$=a("99d9"),w=a("549c"),k=a("169a"),V=a("553a"),D=a("132d"),S=a("8860"),F=a("ba95"),C=a("5d23"),T=a("e449"),A=a("8e36"),q=a("9910"),N=a("71d9"),O=a("2a7f"),M=a("3a2f"),E=Object(f["a"])(h,c,d,!1,null,null,null),P=E.exports;_()(E,{VApp:y["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardText:$["b"],VContent:w["a"],VDialog:k["a"],VFooter:V["a"],VIcon:D["a"],VList:S["a"],VListTile:F["a"],VListTileTitle:C["b"],VMenu:T["a"],VProgressLinear:A["a"],VSpacer:q["a"],VToolbar:N["a"],VToolbarItems:O["a"],VToolbarTitle:O["b"],VTooltip:M["a"]});var L=a("8c4f"),R=a("2f62");r["a"].use(R["a"]);var H=new R["a"].Store({state:{auth:{username:"",userID:"",role:"",token:""},dialogError:!1,errorTitle:"",errorDescription:"",dynamicProgress:!1,progressTitle:""}});n.a.interceptors.request.use((function(e){var t=H.state.auth.token;return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),n.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.response.status;return 401===t&&(H.state.auth.token="",v.a.remove("token"),Fa.push("Login")),Promise.reject(e)}));var j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs2:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{label:"Start Date","prepend-icon":"event",readonly:""},model:{value:e.startDateFormatted,callback:function(t){e.startDateFormatted=t},expression:"startDateFormatted"}},r))]}}]),model:{value:e.startDateMenu,callback:function(t){e.startDateMenu=t},expression:"startDateMenu"}},[a("v-date-picker",{on:{input:function(t){e.startDateMenu=!1}},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs2:""}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("v-text-field",e._g({attrs:{label:"End Date","prepend-icon":"event",readonly:""},model:{value:e.endDateFormatted,callback:function(t){e.endDateFormatted=t},expression:"endDateFormatted"}},r))]}}]),model:{value:e.endDateMenu,callback:function(t){e.endDateMenu=t},expression:"endDateMenu"}},[a("v-date-picker",{on:{input:function(t){e.endDateMenu=!1}},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)],1),a("v-spacer"),a("v-flex",{attrs:{xs2:""}},[a("v-btn",{attrs:{color:"primary",round:""},on:{click:e.generate}},[a("v-icon",{attrs:{left:""}},[e._v("list")]),e._v(" Filter\n      ")],1)],1),a("v-spacer")],1),a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.chartOptions,(function(t,r){return a("v-flex",{key:r,attrs:{xs6:""}},[e._v("\n      "+e._s(t.title.text)+"\n      "),a("v-chart",{attrs:{options:t}})],1)})),1),a("v-data-table",{attrs:{headers:e.reportHeader,items:e.reportRows,"hide-actions":"","pagination.sync":"pagination","item-key":"id"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.name))]),a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.value))])]}}])})],1)},U=[],I=(a("aef6"),a("456d"),a("7514"),a("ac4d"),a("8a81"),a("ac6a"),a("28a5"),a("768b")),B=a("9ca8"),J=(a("c037"),a("007d"),a("d28f"),""),Y={components:{"v-chart":B["a"]},data:function(){return{reportRows:[],reportHeader:[{text:"Village household mapping indicators",value:"Number"},{text:"Value",value:"value"}],startDateMenu:!1,endDateMenu:!1,startDate:new Date("2019-05-01").toISOString().substr(0,10),endDate:(new Date).toISOString().substr(0,10),chartOptions:[]}},methods:{formatDate:function(e){if(!e)return null;var t=e.split("-"),a=Object(I["a"])(t,3),r=a[0],s=a[1],n=a[2];return"".concat(n,"/").concat(s,"/").concat(r)},createChartDefOpt:function(){var e={title:{text:"",subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:[]},series:[{name:"",type:"pie",radius:"30%",center:["35%","40%"],roseType:"radius",data:[],animation:!0,animationType:"expansion",animationThreshold:2e3,animationDuration:1e3,animationDelay:0}]};return e},generate:function(){var e=this;this.chartOptions=[];var t={total_households:{value:0,key:"total_households",name:"Total Number of Households"},total_residents:{value:0,key:"total_residents",name:"Resident Population"},pregnant_woman:{value:0,key:"pregnant_woman_all",name:"Number of pregnant women"},breast_feeding:{value:0,key:"breast_feeding_all",name:"Number of breastfeeding women"},neonates_boys:{value:0,key:"neonates_boy_all",name:"Neonates boys (under 28 days)"},neonates_girls:{value:0,key:"neonates_boy_all",name:"Neonates girls (under 28 days)"},infants_boys:{value:0,key:"infants_boy_all",name:"Infants boys (1 month to under 1 year of age)"},infants_girls:{value:0,key:"infants_girl_all",name:"Infants girls (1 month to under 1 year of age)"},children_male_under5:{value:0,key:"children_male_all",name:"Male children (1 year to under 5 years)"},children_female_under5:{value:0,key:"children_female_all",name:"Female children (1 year to under 5 years)"},adolescents_girls:{value:0,key:"adolescents_girl_10_19_all",name:"Adolescent Girls age 10-19  years"},adolescents_boys:{value:0,key:"adolescents_boy_10_19_all",name:"Adolescent Boys age 10-19  years"},female_youth_20_24:{value:0,key:"female_youth_all",name:"Female youth 20 to 24 years "},male_youth_20_24:{value:0,key:"male_youth_all",name:"Male youth 20 to 24 years"},female_15_49:{value:0,key:"Female_15_49_all",name:"Women of Childbearing Age 15-49 years"},male_15_49:{value:0,key:"Male_15_49_all",name:"Males of 15 to 49 years"},female_above_50:{value:0,key:"female_above_50_all",name:"Female 50 yrs and above"},male_above_50:{value:0,key:"male_above_50_all",name:"Males 50 yrs and above"},female_total:{value:0,key:"female_number_household",name:"Number of Women"},male_total:{value:0,key:"male_number_household",name:"Number of Men"}},a=this.startDate.split("-"),r=this.endDate.split("-");a[0],r[0],a[1],r[1],a[2],r[2];for(var s in n.a.get(J+"/getSubmissions?startDate="+this.startDate+"&endDate="+this.endDate).then((function(a){var r=0,s=[],n=!0,i=!1,o=void 0;try{for(var l,c=function(){var a=l.value,n=e.getDataFromJSON(a,"house_name");if("add_new"==n){n=e.getDataFromJSON(a,"house_name_new");var i=e.getDataFromJSON(a,"house_number_new");n=n+" - "+i;var o=s.find((function(e){return e===n}));o||(r++,s.push(n))}for(var c in t){var d=e.getDataFromJSON(a,t[c].key);d&&(t[c].value+=d)}},d=a.data[Symbol.iterator]();!(n=(l=d.next()).done);n=!0)c()}catch(f){i=!0,o=f}finally{try{n||null==d.return||d.return()}finally{if(i)throw o}}v=e.createChartDefOpt(),v.title.text="Total Male vs Female",v.title.subtext="Total Male vs Female",v.series[0].name="Total Male vs Female",v.legend.data.push("Female (".concat(t["female_total"].value,")")),v.legend.data.push("Male (".concat(t["male_total"].value,")")),v.series[0].data.push({name:"Female (".concat(t["female_total"].value,")"),value:t["female_total"].value}),v.series[0].data.push({name:"Male (".concat(t["male_total"].value,")"),value:t["male_total"].value}),e.chartOptions.push(v),v=e.createChartDefOpt(),v.title.text="Total Households vs Resident Population",v.title.subtext="Total Households vs Resident Population",v.series[0].name="Total Households vs Resident Population";var u=t["female_total"].value+t["male_total"].value;t["total_residents"].value=u,t["total_households"].value=r,v.legend.data.push("Population (".concat(u,")")),v.legend.data.push("Households (".concat(r,")")),v.series[0].data.push({name:"Population (".concat(u,")"),value:u}),v.series[0].data.push({name:"Households (".concat(r,")"),value:r}),e.chartOptions.push(v);var v=e.createChartDefOpt();v.title.text="Pregnant women vs Breast feeding women",v.title.subtext="Pregnant women vs Breast feeding women",v.series[0].name="Pregnant women vs Breast feeding women",v.legend.data.push("Breast Feeding (".concat(t["breast_feeding"].value,")")),v.legend.data.push("Pregnant Women (".concat(t["pregnant_woman"].value,")")),v.series[0].data.push({name:"Breast Feeding (".concat(t["breast_feeding"].value,")"),value:t["breast_feeding"].value}),v.series[0].data.push({name:"Pregnant Women (".concat(t["pregnant_woman"].value,")"),value:t["pregnant_woman"].value}),e.chartOptions.push(v),v=e.createChartDefOpt(),v.title.text="Adolescent girls vs Adolescent boys",v.title.subtext="Adolescent girls vs Adolescent boys",v.series[0].name="Adolescent girls vs Adolescent boys",v.legend.data.push("Girls (".concat(t["adolescents_girls"].value,")")),v.legend.data.push("Boys (".concat(t["adolescents_boys"].value,")")),v.series[0].data.push({name:"Girls (".concat(t["adolescents_girls"].value,")"),value:t["adolescents_girls"].value}),v.series[0].data.push({name:"Boys (".concat(t["adolescents_boys"].value,")"),value:t["adolescents_boys"].value}),e.chartOptions.push(v),v=e.createChartDefOpt(),v.title.text="Male vs Female (15-49 Years)",v.title.subtext="Male vs Female (15-49 Years)",v.series[0].name="Male vs Female (15-49 Years)",v.legend.data.push("Female (".concat(t["female_15_49"].value,")")),v.legend.data.push("Male (".concat(t["male_15_49"].value,")")),v.series[0].data.push({name:"Female (".concat(t["female_15_49"].value,")"),value:t["female_15_49"].value}),v.series[0].data.push({name:"Male (".concat(t["male_15_49"].value,")"),value:t["male_15_49"].value}),e.chartOptions.push(v),v=e.createChartDefOpt(),v.title.text="Male vs Female (50 Years and above)",v.title.subtext="Male vs Female (50 Years and above)",v.series[0].name="Male vs Female (50 Years and above)",v.legend.data.push("Female (".concat(t["female_above_50"].value,")")),v.legend.data.push("Male (".concat(t["male_above_50"].value,")")),v.series[0].data.push({name:"Female (".concat(t["female_above_50"].value,")"),value:t["female_above_50"].value}),v.series[0].data.push({name:"Male (".concat(t["male_above_50"].value,")"),value:t["male_above_50"].value}),e.chartOptions.push(v);var p=t["neonates_girls"].value+t["neonates_boys"].value,m=t["infants_girls"].value+t["infants_boys"].value,h=t["children_male_under5"].value+t["children_female_under5"].value;v=e.createChartDefOpt(),v.title.text="Neonates (under 28 days) vs Infants (1 month to under 1 year) vs Children (1 to under 5 years)",v.title.subtext="Neonates (under 28 days) vs Infants (1 month to under 1 year) vs Children (1 to under 5 years)",v.series[0].name="Neonates (under 28 days) vs Infants (1 month to under 1 year) vs Children (1 to under 5 years)",v.legend.data.push("Neonates - under 28 days (".concat(p,")")),v.legend.data.push("Infants - 1 month to under 1 year (".concat(m,")")),v.legend.data.push("Children - 1 to under 5 years (".concat(h,")")),v.series[0].data.push({name:"Neonates - under 28 days (".concat(p,")"),value:p}),v.series[0].data.push({name:"Infants - 1 month to under 1 year (".concat(m,")"),value:m}),v.series[0].data.push({name:"Children - 1 to under 5 years (".concat(h,")"),value:h}),e.chartOptions.push(v),v=e.createChartDefOpt(),v.title.text="Male vs Female (20-24 Years)",v.title.subtext="Male vs Female (20-24 Years)",v.series[0].name="Male vs Female (20-24 Years)",v.legend.data.push("Female (".concat(t["female_youth_20_24"].value,")")),v.legend.data.push("Male (".concat(t["male_youth_20_24"].value,")")),v.series[0].data.push({name:"Female (".concat(t["female_youth_20_24"].value,")"),value:t["female_youth_20_24"].value}),v.series[0].data.push({name:"Male (".concat(t["male_youth_20_24"].value,")"),value:t["male_youth_20_24"].value}),e.chartOptions.push(v)})),this.reportRows=[],t)this.reportRows.push(t[s])},getDataFromJSON:function(e,t){var a=Object.keys(e);if(e.hasOwnProperty(t))return e[t];var r=a.find((function(e){return e.endsWith("/"+t)}));return!!r&&e[r]}},computed:{startDateFormatted:function(){if(!this.startDate)return null;var e=this.startDate.split("-"),t=Object(I["a"])(e,3),a=t[0],r=t[1],s=t[2];return"".concat(s,"/").concat(r,"/").concat(a)},endDateFormatted:function(){if(!this.endDate)return null;var e=this.endDate.split("-"),t=Object(I["a"])(e,3),a=t[0],r=t[1],s=t[2];return"".concat(s,"/").concat(r,"/").concat(a)}},created:function(){this.generate()}},W=Y,z=a("a523"),G=a("8fea"),K=a("2e4b"),Q=a("0e8f"),X=a("a722"),Z=a("2677"),ee=Object(f["a"])(W,j,U,!1,null,null,null),te=ee.exports;_()(ee,{VBtn:b["a"],VContainer:z["a"],VDataTable:G["a"],VDatePicker:K["a"],VFlex:Q["a"],VIcon:D["a"],VLayout:X["a"],VMenu:T["a"],VSpacer:q["a"],VTextField:Z["a"]});var ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs12:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"1000px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New CHA")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,box:"",color:"deep-purple",label:"First Name*"},on:{blur:function(t){return e.$v.firstName.$touch()},change:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Middle Names"},model:{value:e.otherName,callback:function(t){e.otherName=t},expression:"otherName"}}),a("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,box:"",color:"deep-purple",label:"Surname*"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),a("v-text-field",{attrs:{required:"","error-messages":e.phone1Errors,box:"",color:"deep-purple",label:"Mobile Phone 1*"},on:{blur:function(t){return e.$v.phone1.$touch()},change:function(t){return e.$v.phone1.$touch()}},model:{value:e.phone1,callback:function(t){e.phone1=t},expression:"phone1"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Mobile Phone 2"},model:{value:e.phone2,callback:function(t){e.phone2=t},expression:"phone2"}}),a("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,box:"",color:"deep-purple",label:"Email*"},on:{blur:function(t){return e.$v.email.$touch()},change:function(t){return e.$v.email.$touch()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{required:"","error-messages":e.odkUsernameErrors,box:"",color:"deep-purple",label:"ODK Username*"},on:{blur:function(t){return e.$v.odkUsername.$touch()},change:function(t){return e.$v.odkUsername.$touch()}},model:{value:e.odkUsername,callback:function(t){e.odkUsername=t},expression:"odkUsername"}}),e.$v.$error?a("label",{staticClass:"text-sm mt-2 text-red"},[e.$v.odkUsernameUnique?e._e():a("label",{staticStyle:{color:"red"}},[e._v("This username is already taken")])]):e._e(),a("v-treeview",{staticClass:"grey lighten-5",attrs:{active:e.active,open:e.open,items:e.items,"load-children":e.getLocation,activatable:"","active-class":"primary--text","open-on-click":"",transition:""},on:{"update:active":function(t){e.active=t},"update:open":function(t){e.open=t}},scopedSlots:e._u([{key:"prepend",fn:function(t){var r=t.item,s=t.active;return[r.children?e._e():a("v-icon",{attrs:{color:s?"primary":""}},[e._v("\n                    mdi-account\n                  ")])]}}])})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.$refs.form.reset()}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid||0===e.active.length,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addCHA()}}},[a("v-icon",{attrs:{left:""}},[e._v("how_to_reg")]),e._v("Add\n          ")],1)],1)],1)],1),a("v-spacer")],1)],1)},re=[],se=a("75fc"),ne=a("b5ae"),ie="",oe={validations:{phone1:{required:ne["required"],integer:ne["integer"],minLength:Object(ne["minLength"])(10),maxLength:Object(ne["maxLength"])(10),minValue:Object(ne["minValue"])(0)},email:{required:ne["required"],email:ne["email"]},firstName:{required:ne["required"]},surname:{required:ne["required"]},odkUsername:{required:ne["required"],odkUsernameUnique:function(e){if(""===e)return!0;var t=new FormData;return t.append("username",e),new Promise((function(e,a){n.a.post(ie+"/usernameExist/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){t.data.length>0?e(!1):e(!0)}))}))}}},data:function(){return{active:[],open:[],tree:[],firstName:"",otherName:"",surname:"",email:"",phone1:"",phone2:"",odkUsername:"",alertFail:!1,alertSuccess:!1,alertMsg:""}},methods:{addCHA:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving CHA";var t=new FormData;for(var a in t.append("firstName",this.firstName),t.append("otherName",this.otherName),t.append("surname",this.surname),t.append("email",this.email),t.append("phone1",this.phone1),t.append("phone2",this.phone2),t.append("village",this.active[0]),t.append("odkUsername",this.odkUsername),this.customFields)t.append(a,this.customFields[a]);n.a.post(ie+"/addCHA/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var t=Object.keys(e.$v.$params),a=0,r=t;a<r.length;a++){var s=r[a];e.$v[s].$reset()}e.$refs.form.reset(),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.alertMsg="CHA added successfully",setTimeout((function(){e.alertSuccess=!1}),3e3)})).catch((function(t){e.$store.state.dynamicProgress=!1,e.alertFail=!0,e.alertMsg="This CHA was not added, something went wrong",console.log(t.response.data.error)}))},usernameExist:function(e){var t=new FormData;t.append("username",this.odkUsername),n.a.post(ie+"/usernameExist/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){return t.data.length>0?e(!0):e(!1)}))},getLocation:function(e){var t;t=e.typeTag?"?type="+e.typeTag+"&checkChild="+!1+"&id="+e.id+"&lastLocationType=village":"?type=&checkChild=false&lastLocationType=village",n.a.get(ie+"/locationTree"+t).then((function(t){var a;return(a=e.children).push.apply(a,Object(se["a"])(t.data)),e}))}},computed:{items:function(){return[{name:"Parent*",children:this.tree}]},phone1Errors:function(){var e=[];return this.$v.phone1.$dirty?(this.$v.phone1.required||e.push("Phone 1 is required"),this.$v.phone1.$invalid&&e.push("Phone 1 is in wrong format"),e):e},emailErrors:function(){var e=[];return this.$v.email.$dirty?(this.$v.email.required||e.push("Email is required"),this.$v.email.$invalid&&e.push("Email is in wrong format"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstName.$dirty?(!this.$v.firstName.required&&e.push("Firstname is required"),e):e},odkUsernameErrors:function(){var e=[];return this.$v.odkUsername.$dirty?(this.$v.odkUsername.required||e.push("ODK Username is required"),e):e}}},le=oe,ce=a("0798"),de=a("12b2"),ue=a("ce7e"),ve=a("4bd4"),pe=a("afd9"),me=a("eb2a"),he=Object(f["a"])(le,ae,re,!1,null,null,null),fe=he.exports;_()(he,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardTitle:de["a"],VContainer:z["a"],VDivider:ue["a"],VFlex:Q["a"],VForm:ve["a"],VIcon:D["a"],VLayout:X["a"],VSpacer:q["a"],VSystemBar:pe["a"],VTextField:Z["a"],VToolbar:N["a"],VTreeview:me["a"]});var ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs12:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"1000px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New Health Facility Supervisor")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,box:"",color:"deep-purple",label:"First Name*"},on:{blur:function(t){return e.$v.firstName.$touch()},change:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Middle Names"},model:{value:e.otherName,callback:function(t){e.otherName=t},expression:"otherName"}}),a("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,box:"",color:"deep-purple",label:"Surname*"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}})],1),a("v-spacer"),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.phone1Errors,box:"",color:"deep-purple",label:"Mobile Phone 1*"},on:{blur:function(t){return e.$v.phone1.$touch()},change:function(t){return e.$v.phone1.$touch()}},model:{value:e.phone1,callback:function(t){e.phone1=t},expression:"phone1"}}),a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Mobile Phone 2"},model:{value:e.phone2,callback:function(t){e.phone2=t},expression:"phone2"}}),a("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,box:"",color:"deep-purple",label:"Email*"},on:{blur:function(t){return e.$v.email.$touch()},change:function(t){return e.$v.email.$touch()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-treeview",{staticClass:"grey lighten-5",attrs:{active:e.active,open:e.open,items:e.items,"load-children":e.getLocation,activatable:"","active-class":"primary--text","open-on-click":"",transition:""},on:{"update:active":function(t){e.active=t},"update:open":function(t){e.open=t}},scopedSlots:e._u([{key:"prepend",fn:function(t){var r=t.item,s=t.active;return[r.children?e._e():a("v-icon",{attrs:{color:s?"primary":""}},[e._v("\n                    mdi-account\n                  ")])]}}])})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.$refs.form.reset()}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid||0===e.active.length,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addHFS()}}},[a("v-icon",{attrs:{left:""}},[e._v("how_to_reg")]),e._v("Add")],1)],1)],1)],1),a("v-spacer")],1)],1)},_e=[],ye="",be={validations:{phone1:{required:ne["required"],integer:ne["integer"],minLength:Object(ne["minLength"])(10),maxLength:Object(ne["maxLength"])(10),minValue:Object(ne["minValue"])(0)},email:{required:ne["required"],email:ne["email"]},firstName:{required:ne["required"]},surname:{required:ne["required"]}},data:function(){return{active:[],open:[],tree:[],firstName:"",otherName:"",surname:"",email:"",phone1:"",phone2:"",alertFail:!1,alertSuccess:!1,alertMsg:""}},methods:{addHFS:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving HFS";var t=new FormData;for(var a in t.append("firstName",this.firstName),t.append("otherName",this.otherName),t.append("surname",this.surname),t.append("email",this.email),t.append("phone1",this.phone1),t.append("phone2",this.phone2),t.append("facility",this.active[0]),this.customFields)t.append(a,this.customFields[a]);n.a.post(ye+"/addHFS/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var t=Object.keys(e.$v.$params),a=0,r=t;a<r.length;a++){var s=r[a];e.$v[s].$reset()}e.$refs.form.reset(),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.alertMsg="HFS added successfully"})).catch((function(t){e.$store.state.dynamicProgress=!1,e.alertFail=!0,e.alertMsg="This HFS was not added, something went wrong",console.log(t.response.data.error)}))},getLocation:function(e){var t;t=e.typeTag?"?type="+e.typeTag+"&checkChild="+!1+"&id="+e.id+"&lastLocationType=facility":"?type=&checkChild=false&lastLocationType=facility",n.a.get(ye+"/locationTree"+t).then((function(t){var a;return(a=e.children).push.apply(a,Object(se["a"])(t.data)),e}))}},computed:{items:function(){return[{name:"Parent*",children:this.tree}]},phone1Errors:function(){var e=[];return this.$v.phone1.$dirty?(this.$v.phone1.required||e.push("Phone 1 is required"),this.$v.phone1.$invalid&&e.push("Phone 1 is in wrong format"),e):e},emailErrors:function(){var e=[];return this.$v.email.$dirty?(this.$v.email.required||e.push("Email is required"),this.$v.email.$invalid&&e.push("Email is in wrong format"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstName.$dirty?(!this.$v.firstName.required&&e.push("Firstname is required"),e):e}}},xe=be,$e=Object(f["a"])(xe,ge,_e,!1,null,null,null),we=$e.exports;_()($e,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardTitle:de["a"],VContainer:z["a"],VDivider:ue["a"],VFlex:Q["a"],VForm:ve["a"],VIcon:D["a"],VLayout:X["a"],VSpacer:q["a"],VSystemBar:pe["a"],VTextField:Z["a"],VToolbar:N["a"],VTreeview:me["a"]});var ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New Region")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Region Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.$refs.form.reset()}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addRegion()}}},[a("v-icon",{attrs:{left:""}},[e._v("how_to_reg")]),e._v("Add")],1)],1)],1)],1),a("v-spacer")],1)],1)},Ve=[],De=(a("7f7f"),""),Se={validations:{name:{required:ne["required"]}},data:function(){return{name:"",alertFail:!1,alertSuccess:!1,alertMsg:""}},methods:{addRegion:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving Region";var t=new FormData;t.append("name",this.name),n.a.post(De+"/addRegion/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var t=Object.keys(e.$v.$params),a=0,r=t;a<r.length;a++){var s=r[a];e.$v[s].$reset()}e.$refs.form.reset(),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.alertMsg="Region added successfully"})).catch((function(t){e.$store.state.dynamicProgress=!1,e.alertFail=!0,e.alertMsg="This region was not added, ensure name is not used",console.log(t.response.data.error)}))}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("Region Name is required"),e):e}}},Fe=Se,Ce=Object(f["a"])(Fe,ke,Ve,!1,null,null,null),Te=Ce.exports;_()(Ce,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardTitle:de["a"],VContainer:z["a"],VDivider:ue["a"],VFlex:Q["a"],VForm:ve["a"],VIcon:D["a"],VLayout:X["a"],VSpacer:q["a"],VSystemBar:pe["a"],VTextField:Z["a"],VToolbar:N["a"]});var Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New District")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"District Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-select",{attrs:{required:"",items:e.regions,"item-text":"name","item-value":"_id","single-line":"",clearable:"","error-messages":e.regionErrors,box:"",label:"Region"},on:{blur:function(t){return e.$v.region.$touch()},change:function(t){return e.$v.region.$touch()}},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.$refs.form.reset()}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addDistrict()}}},[a("v-icon",{attrs:{left:""}},[e._v("how_to_reg")]),e._v("Add\n          ")],1)],1)],1)],1),a("v-spacer")],1)],1)},qe=[],Ne="",Oe={validations:{name:{required:ne["required"]},region:{required:ne["required"]}},data:function(){return{name:"",regions:[],region:"",alertFail:!1,alertSuccess:!1,alertMsg:""}},methods:{addDistrict:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving Region";var t=new FormData;t.append("name",this.name),t.append("parent",this.region),n.a.post(Ne+"/addDistrict/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var t=Object.keys(e.$v.$params),a=0,r=t;a<r.length;a++){var s=r[a];e.$v[s].$reset()}e.$refs.form.reset(),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.alertMsg="Region added successfully"})).catch((function(t){e.$store.state.dynamicProgress=!1,e.alertFail=!0,e.alertMsg="This district was not added, ensure name is not used",console.log(t.response.data.error)}))},getRegions:function(){var e=this;n.a.get(Ne+"/location/Regions").then((function(t){e.regions=t.data}))}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("District Name is required"),e):e},regionErrors:function(){var e=[];return this.$v.region.$dirty?(!this.$v.region.required&&e.push("Region is required"),e):e}},created:function(){this.getRegions()}},Me=Oe,Ee=a("b56d"),Pe=Object(f["a"])(Me,Ae,qe,!1,null,null,null),Le=Pe.exports;_()(Pe,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardTitle:de["a"],VContainer:z["a"],VDivider:ue["a"],VFlex:Q["a"],VForm:ve["a"],VIcon:D["a"],VLayout:X["a"],VSelect:Ee["a"],VSpacer:q["a"],VSystemBar:pe["a"],VTextField:Z["a"],VToolbar:N["a"]});var Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New Facility")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Facility Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-treeview",{staticClass:"grey lighten-5",attrs:{active:e.active,open:e.open,items:e.items,"load-children":e.getLocation,activatable:"","active-class":"primary--text","open-on-click":"",transition:""},on:{"update:active":function(t){e.active=t},"update:open":function(t){e.open=t}},scopedSlots:e._u([{key:"prepend",fn:function(t){var r=t.item,s=t.active;return[r.children?e._e():a("v-icon",{attrs:{color:s?"primary":""}},[e._v("\n                mdi-account\n              ")])]}}])})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.$refs.form.reset()}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid||0===e.active.length,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addFacility()}}},[a("v-icon",{attrs:{left:""}},[e._v("how_to_reg")]),e._v("Add\n          ")],1)],1)],1)],1),a("v-spacer")],1)],1)},He=[],je="",Ue={data:function(){return{lastLocationType:"village"}},methods:{getLocation:function(e){var t;t=e.typeTag?"?type="+e.typeTag+"&checkChild="+!1+"&id="+e.id+"&lastLocationType="+this.lastLocationType:"?type=&checkChild=false&lastLocationType="+this.lastLocationType,n.a.get(je+"/locationTree"+t).then((function(t){var a;return(a=e.children).push.apply(a,Object(se["a"])(t.data)),e}))}}},Ie="",Be={mixins:[Ue],validations:{name:{required:ne["required"]}},data:function(){return{active:[],open:[],name:"",tree:[],alertFail:!1,alertSuccess:!1,alertMsg:""}},methods:{addFacility:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving Facility";var t=new FormData;t.append("name",this.name),t.append("parent",this.active[0]),n.a.post(Ie+"/addFacility/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var t=Object.keys(e.$v.$params),a=0,r=t;a<r.length;a++){var s=r[a];e.$v[s].$reset()}e.$refs.form.reset(),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.alertMsg="Facility added successfully"})).catch((function(t){e.$store.state.dynamicProgress=!1,e.alertFail=!0,e.alertMsg="This facility was not added, ensure name is not used",console.log(t.response.data.error)}))}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("District Name is required"),e):e},items:function(){return[{name:"Parent",children:this.tree}]}},created:function(){this.lastLocationType="district"}},Je=Be,Ye=Object(f["a"])(Je,Re,He,!1,null,null,null),We=Ye.exports;_()(Ye,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardTitle:de["a"],VContainer:z["a"],VDivider:ue["a"],VFlex:Q["a"],VForm:ve["a"],VIcon:D["a"],VLayout:X["a"],VSpacer:q["a"],VSystemBar:pe["a"],VTextField:Z["a"],VToolbar:N["a"],VTreeview:me["a"]});var ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New Village")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.nameErrors,box:"",color:"deep-purple",label:"Village Name"},on:{blur:function(t){return e.$v.name.$touch()},change:function(t){return e.$v.name.$touch()}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-treeview",{staticClass:"grey lighten-5",attrs:{active:e.active,open:e.open,items:e.items,"load-children":e.getLocation,activatable:"","active-class":"primary--text","open-on-click":"",transition:""},on:{"update:active":function(t){e.active=t},"update:open":function(t){e.open=t}},scopedSlots:e._u([{key:"prepend",fn:function(t){var r=t.item,s=t.active;return[r.children?e._e():a("v-icon",{attrs:{color:s?"primary":""}},[e._v("\n                mdi-account\n              ")])]}}])})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.$refs.form.reset()}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid||0===e.active.length,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addVillage()}}},[a("v-icon",{attrs:{left:""}},[e._v("how_to_reg")]),e._v("Add")],1)],1)],1)],1),a("v-spacer")],1)],1)},Ge=[],Ke="",Qe={validations:{name:{required:ne["required"]}},data:function(){return{active:[],open:[],name:"",tree:[],alertFail:!1,alertSuccess:!1,alertMsg:""}},methods:{addVillage:function(){var e=this;this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving Village";var t=new FormData;t.append("name",this.name),t.append("parent",this.active[0]),n.a.post(Ke+"/addVillage/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var t=Object.keys(e.$v.$params),a=0,r=t;a<r.length;a++){var s=r[a];e.$v[s].$reset()}e.$refs.form.reset(),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.alertMsg="Village added successfully"})).catch((function(t){e.$store.state.dynamicProgress=!1,e.alertFail=!0,e.alertMsg="This village was not added, ensure name is not used",console.log(t.response.data.error)}))},getLocation:function(e){var t;t=e.typeTag?"?type="+e.typeTag+"&checkChild="+!1+"&id="+e.id+"&lastLocationType=facility":"?type=&checkChild=false&lastLocationType=facility",n.a.get(Ke+"/locationTree"+t).then((function(t){var a;return(a=e.children).push.apply(a,Object(se["a"])(t.data)),e}))}},computed:{nameErrors:function(){var e=[];return this.$v.name.$dirty?(!this.$v.name.required&&e.push("District Name is required"),e):e},items:function(){return[{name:"Parent",children:this.tree}]}}},Xe=Qe,Ze=Object(f["a"])(Xe,ze,Ge,!1,null,null,null),et=Ze.exports;_()(Ze,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardTitle:de["a"],VContainer:z["a"],VDivider:ue["a"],VFlex:Q["a"],VForm:ve["a"],VIcon:D["a"],VLayout:X["a"],VSpacer:q["a"],VSystemBar:pe["a"],VTextField:Z["a"],VToolbar:N["a"],VTreeview:me["a"]});var tt,at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[e.deleteDialog?a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v("\n          Confirm deleting\n        ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.deleteDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[e._v("\n        Are you sure you want to delete "+e._s(e.region.name)+" ?\n      ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.deleteRegion(t)}}},[e._v("Ok")])],1)],1)],1):e._e(),e.editDialog?a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n          Editing "+e._s(e.region.name)+"\n        ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDialog(t)}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Name"},model:{value:e.region.name,callback:function(t){e.$set(e.region,"name",t)},expression:"region.name"}})],1)],1)],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){return e.closeDialog(t)}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel\n        ")],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.region.name,color:"primary",dark:""},nativeOn:{click:function(t){return e.saveRegion()}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save\n        ")],1)],1)],1)],1):e._e(),a("v-layout",{attrs:{column:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),a("center",[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[e._v("\n            List of region\n          ")]),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",color:"primary"},model:{value:e.searchRegion,callback:function(t){e.searchRegion=t},expression:"searchRegion"}})],1)],1),a("v-data-table",{staticClass:"elevation-1",staticStyle:{width:"550px"},attrs:{headers:e.headers,items:e.regions,"pagination.sync":"pagination","item-key":"_id",loading:e.loading,search:e.searchRegion},scopedSlots:e._u([{key:"items",fn:function(t){return a("tr",{key:t.item._id},[a("td",["Admin"===e.$store.state.auth.role?a("v-btn",{attrs:{color:"success",icon:""},on:{click:function(a){return e.confirmDelete(t.item)}}},[a("v-icon",[e._v("delete")])],1):e._e(),a("v-btn",{attrs:{color:"success",icon:""},on:{click:function(a){return e.editRegion(t.item)}}},[a("v-icon",[e._v("edit")])],1)],1),a("td",[e._v(e._s(t.item.name))])])}}])})],1)],1)],1)],1)},rt=[],st=a("bd86"),nt=a("3c4e"),it=a.n(nt),ot="",lt={data:function(){return{searchRegion:"",deleteDialog:!1,alertSuccess:!1,alertFail:!1,alertMsg:"",regions:[],loading:!1,editDialog:!1,region:{},headers:[{sortable:!1,align:"left",width:2},{text:"Name",value:"name",width:20}]}},methods:(tt={closeDialog:function(){this.region={},this.editDialog=!1},getRegions:function(){var e=this;this.loading=!0,n.a.get(ot+"/getRegions").then((function(t){e.loading=!1,e.regions=t.data})).catch((function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription="An error occured while getting reports"}))}},Object(st["a"])(tt,"getRegions",(function(){var e=this;n.a.get(ot+"/location/Regions").then((function(t){e.regions=t.data}))})),Object(st["a"])(tt,"editRegion",(function(e){this.region={},this.region=it.a.all([e]),this.editDialog=!0})),Object(st["a"])(tt,"saveRegion",(function(){var e=this,t=new FormData;t.append("id",this.region._id),t.append("name",this.region.name),t.append("type","Regions"),n.a.post(ot+"/editLocation",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.alertSuccess=!0,e.alertMsg="Changes saved successfully",e.editDialog=!1,e.getRegions()})).catch((function(t){e.alertFail=!0,e.alertMsg="An error occured and changes were not saved",e.editDialog=!1}))})),Object(st["a"])(tt,"confirmDelete",(function(e){this.region={},this.region=it.a.all([e]),this.deleteDialog=!0})),Object(st["a"])(tt,"deleteRegion",(function(){var e=this;n.a.delete(ot+"/deleteLocation/".concat(this.region._id,"/Regions")).then((function(t){e.alertSuccess=!0,e.alertMsg="Facility deleted successfully",e.deleteDialog=!1,e.getRegions()})).catch((function(t){e.alertFail=!0,e.alertMsg="An error occured while deleting village",e.deleteDialog=!1}))})),tt),created:function(){this.getRegions()}},ct=lt,dt=Object(f["a"])(ct,at,rt,!1,null,null,null),ut=dt.exports;_()(dt,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardText:$["b"],VContainer:z["a"],VDataTable:G["a"],VDialog:k["a"],VFlex:Q["a"],VIcon:D["a"],VLayout:X["a"],VSpacer:q["a"],VTextField:Z["a"],VToolbar:N["a"],VToolbarTitle:O["b"]});var vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[e.deleteDialog?a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v("\n          Confirm deleting\n        ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.deleteDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[e._v("\n        Are you sure you want to delete "+e._s(e.district.name)+" ?\n      ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.deleteDistrict(t)}}},[e._v("Ok")])],1)],1)],1):e._e(),e.editDialog?a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n          Editing "+e._s(e.district.name)+"\n        ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDialog(t)}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Name"},model:{value:e.district.name,callback:function(t){e.$set(e.district,"name",t)},expression:"district.name"}}),a("v-select",{attrs:{required:"",items:e.regions,"item-text":"name","item-value":"_id","single-line":"",box:"",label:"Region"},model:{value:e.district.parent._id,callback:function(t){e.$set(e.district.parent,"_id",t)},expression:"district.parent._id"}})],1)],1)],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){return e.closeDialog(t)}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel\n        ")],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.district.name,color:"primary",dark:""},nativeOn:{click:function(t){return e.saveDistrict()}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save\n        ")],1)],1)],1)],1):e._e(),a("v-layout",{attrs:{column:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),a("center",[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[e._v("\n            List of districts\n          ")]),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",color:"primary"},model:{value:e.searchDistrict,callback:function(t){e.searchDistrict=t},expression:"searchDistrict"}})],1)],1),a("v-data-table",{staticClass:"elevation-1",staticStyle:{width:"600px"},attrs:{headers:e.headers,items:e.districts,"pagination.sync":"pagination","item-key":"_id",loading:e.loading,search:e.searchDistrict},scopedSlots:e._u([{key:"items",fn:function(t){return a("tr",{key:t.item._id},[a("td",["Admin"===e.$store.state.auth.role?a("v-btn",{attrs:{color:"success",icon:""},on:{click:function(a){return e.confirmDelete(t.item)}}},[a("v-icon",[e._v("delete")])],1):e._e(),a("v-btn",{attrs:{color:"success",icon:""},on:{click:function(a){return e.editDistrict(t.item)}}},[a("v-icon",[e._v("edit")])],1)],1),a("td",[e._v(e._s(t.item.name))]),a("td",{staticStyle:{"text-align":"right"}},[e._v(e._s(t.item.parent.name))])])}}])})],1)],1)],1)],1)},pt=[],mt="",ht={data:function(){return{searchDistrict:"",deleteDialog:!1,alertSuccess:!1,alertFail:!1,alertMsg:"",districts:[],regions:[],loading:!1,editDialog:!1,district:{},headers:[{sortable:!1,align:"left"},{text:"Name",value:"name"},{text:"Region",value:"region",align:"right"}]}},methods:{closeDialog:function(){this.district={},this.editDialog=!1},getDistricts:function(){var e=this;this.loading=!0,n.a.get(mt+"/getDistricts").then((function(t){e.loading=!1,e.districts=t.data})).catch((function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription="An error occured while getting reports"}))},getRegions:function(){var e=this;n.a.get(mt+"/location/Regions").then((function(t){e.regions=t.data}))},editDistrict:function(e){this.district={},this.district=it.a.all([e]),this.editDialog=!0},saveDistrict:function(){var e=this,t=new FormData;t.append("id",this.district._id),t.append("name",this.district.name),t.append("parent",this.district.parent._id),t.append("type","Districts"),n.a.post(mt+"/editLocation",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.alertSuccess=!0,e.alertMsg="Changes saved successfully",e.editDialog=!1,e.getDistricts()})).catch((function(t){e.alertFail=!0,e.alertMsg="An error occured and changes were not saved",e.editDialog=!1}))},confirmDelete:function(e){this.district={},this.district=it.a.all([e]),this.deleteDialog=!0},deleteDistrict:function(){var e=this;n.a.delete(mt+"/deleteLocation/".concat(this.district._id,"/Districts")).then((function(t){e.alertSuccess=!0,e.alertMsg="Facility deleted successfully",e.deleteDialog=!1,e.getDistricts()})).catch((function(t){e.alertFail=!0,e.alertMsg="An error occured while deleting village",e.deleteDialog=!1}))}},created:function(){this.getDistricts(),this.getRegions()}},ft=ht,gt=Object(f["a"])(ft,vt,pt,!1,null,null,null),_t=gt.exports;_()(gt,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardText:$["b"],VContainer:z["a"],VDataTable:G["a"],VDialog:k["a"],VFlex:Q["a"],VIcon:D["a"],VLayout:X["a"],VSelect:Ee["a"],VSpacer:q["a"],VTextField:Z["a"],VToolbar:N["a"],VToolbarTitle:O["b"]});var yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[e.deleteDialog?a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v("\n          Confirm deleting\n        ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.deleteDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[e._v("\n        Are you sure you want to delete "+e._s(e.facility.name)+" ?\n      ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.deleteFacility(t)}}},[e._v("Ok")])],1)],1)],1):e._e(),e.editDialog?a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n          Editing "+e._s(e.facility.name)+"\n        ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDialog(t)}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Name"},model:{value:e.facility.name,callback:function(t){e.$set(e.facility,"name",t)},expression:"facility.name"}}),e._v("\n            District "+e._s(e.facility.parent.name)+"\n            "),a("v-treeview",{staticClass:"grey lighten-5",attrs:{active:e.active,open:e.open,items:e.locations,"load-children":e.getLocation,activatable:"","return-object":"","active-class":"primary--text","open-on-click":"",transition:""},on:{"update:active":function(t){e.active=t},"update:open":function(t){e.open=t}},scopedSlots:e._u([{key:"prepend",fn:function(t){var r=t.item,s=t.active;return[r.children?e._e():a("v-icon",{attrs:{color:s?"primary":""}},[e._v("\n                  mdi-account\n                ")])]}}],null,!1,1547280211)})],1)],1)],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){return e.closeDialog(t)}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel\n        ")],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.facility.name,color:"primary",dark:""},nativeOn:{click:function(t){return e.saveFacility()}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save\n        ")],1)],1)],1)],1):e._e(),a("v-layout",{attrs:{column:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),a("center",[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[e._v("\n            List of facilities\n          ")]),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",color:"primary"},model:{value:e.searchFacility,callback:function(t){e.searchFacility=t},expression:"searchFacility"}})],1)],1),a("v-data-table",{staticClass:"elevation-1",staticStyle:{width:"630px"},attrs:{headers:e.headers,items:e.facilities,"pagination.sync":"pagination","item-key":"_id",loading:e.loading,search:e.searchFacility},scopedSlots:e._u([{key:"items",fn:function(t){return a("tr",{key:t.item._id},[a("td",["Admin"===e.$store.state.auth.role?a("v-btn",{attrs:{color:"success",icon:""},on:{click:function(a){return e.confirmDelete(t.item)}}},[a("v-icon",[e._v("delete")])],1):e._e(),a("v-btn",{attrs:{color:"success",icon:""},on:{click:function(a){return e.editFacility(t.item)}}},[a("v-icon",[e._v("edit")])],1)],1),a("td",[e._v(e._s(t.item.name))]),a("td",{staticStyle:{"text-align":"right"}},[e._v(e._s(t.item.parent.name))])])}}])})],1)],1)],1)],1)},bt=[],xt="",$t={mixins:[Ue],data:function(){return{searchFacility:"",deleteDialog:!1,alertSuccess:!1,alertFail:!1,alertMsg:"",facilities:[],tree:[],active:[],open:[],loading:!1,editDialog:!1,facility:{},headers:[{sortable:!1,align:"left"},{text:"Name",value:"name"},{text:"District",value:"district",align:"right"}]}},methods:{closeDialog:function(){this.facility={},this.editDialog=!1},getFacilities:function(){var e=this;this.loading=!0,n.a.get(xt+"/getFacilities").then((function(t){e.loading=!1,e.facilities=t.data})).catch((function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription="An error occured while getting reports"}))},editFacility:function(e){this.facility={},this.facility=it.a.all([e]),this.editDialog=!0},saveFacility:function(){var e=this,t=new FormData;t.append("id",this.facility._id),t.append("name",this.facility.name),t.append("parent",this.facility.parent._id),t.append("type","Facilities"),n.a.post(xt+"/editLocation",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.alertSuccess=!0,e.alertMsg="Changes saved successfully",e.editDialog=!1,e.getFacilities()})).catch((function(t){e.alertFail=!0,e.alertMsg="An error occured and changes were not saved",e.editDialog=!1}))},confirmDelete:function(e){this.facility={},this.facility=it.a.all([e]),this.deleteDialog=!0},deleteFacility:function(){var e=this;n.a.delete(xt+"/deleteLocation/".concat(this.facility._id,"/Facilities")).then((function(t){e.alertSuccess=!0,e.alertMsg="Facility deleted successfully",e.deleteDialog=!1,e.getFacilities()})).catch((function(t){e.alertFail=!0,e.alertMsg="An error occured while deleting village",e.deleteDialog=!1}))}},computed:{locations:function(){return[{name:"Parent",children:this.tree}]}},watch:{active:function(e,t){0!==e.length&&(this.facility.parent.name=e[0].name,this.facility.parent.parent=e[0].parent,this.facility.parent._id=e[0].id)}},created:function(){this.getFacilities(),this.lastLocationType="district"}},wt=$t,kt=Object(f["a"])(wt,yt,bt,!1,null,null,null),Vt=kt.exports;_()(kt,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardText:$["b"],VContainer:z["a"],VDataTable:G["a"],VDialog:k["a"],VFlex:Q["a"],VIcon:D["a"],VLayout:X["a"],VSpacer:q["a"],VTextField:Z["a"],VToolbar:N["a"],VToolbarTitle:O["b"],VTreeview:me["a"]});var Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xs":""}},[e.deleteDialog?a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v("\n          Confirm deleting\n        ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.deleteDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[e._v("\n        Are you sure you want to delete "+e._s(e.village.name)+" ?\n      ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.deleteVillage(t)}}},[e._v("Ok")])],1)],1)],1):e._e(),e.editDialog?a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n          Editing "+e._s(e.village.name)+"\n        ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDialog(t)}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Name"},model:{value:e.village.name,callback:function(t){e.$set(e.village,"name",t)},expression:"village.name"}}),e._v("\n            Facility "+e._s(e.village.parent.name)+"\n            "),a("v-treeview",{staticClass:"grey lighten-5",attrs:{active:e.active,open:e.open,items:e.locations,"load-children":e.getLocation,activatable:"","return-object":"","active-class":"primary--text","open-on-click":"",transition:""},on:{"update:active":function(t){e.active=t},"update:open":function(t){e.open=t}},scopedSlots:e._u([{key:"prepend",fn:function(t){var r=t.item,s=t.active;return[r.children?e._e():a("v-icon",{attrs:{color:s?"primary":""}},[e._v("\n                  mdi-account\n                ")])]}}],null,!1,1547280211)})],1)],1)],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){return e.closeDialog(t)}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel\n        ")],1),a("v-spacer"),a("v-btn",{attrs:{disabled:!e.village.name,color:"primary",dark:""},nativeOn:{click:function(t){return e.saveVillage()}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save\n        ")],1)],1)],1)],1):e._e(),a("v-layout",{attrs:{column:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),a("center",[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[e._v("\n            List of villages\n          ")]),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",color:"primary"},model:{value:e.searchVillage,callback:function(t){e.searchVillage=t},expression:"searchVillage"}})],1)],1),a("v-data-table",{staticClass:"elevation-1",staticStyle:{width:"600px"},attrs:{headers:e.headers,items:e.villages,"pagination.sync":"pagination","item-key":"_id",loading:e.loading,search:e.searchVillage},scopedSlots:e._u([{key:"items",fn:function(t){return a("tr",{key:t.item._id},[a("td",["Admin"===e.$store.state.auth.role?a("v-btn",{attrs:{color:"success",icon:""},on:{click:function(a){return e.confirmDelete(t.item)}}},[a("v-icon",[e._v("delete")])],1):e._e(),"Admin"==e.$store.state.auth.role?a("v-btn",{attrs:{color:"success",icon:""},on:{click:function(a){return e.editVillage(t.item)}}},[a("v-icon",[e._v("edit")])],1):e._e()],1),a("td",[e._v(e._s(t.item.name))]),a("td",{staticStyle:{"text-align":"right"}},[e._v(e._s(t.item.parent.name))])])}}])})],1)],1)],1)],1)},St=[],Ft="",Ct={mixins:[Ue],data:function(){return{searchVillage:"",deleteDialog:!1,alertSuccess:!1,alertFail:!1,alertMsg:"",villages:[],tree:[],active:[],open:[],loading:!1,editDialog:!1,village:{},headers:[{sortable:!1,align:"left"},{text:"Name",value:"name"},{text:"Facility",value:"facility",align:"right"}]}},methods:{closeDialog:function(){this.village={},this.editDialog=!1},getVillages:function(){var e=this;this.loading=!0,n.a.get(Ft+"/getVillages").then((function(t){e.loading=!1,e.villages=t.data})).catch((function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription="An error occured while getting reports"}))},editVillage:function(e){this.village={},this.village=it.a.all([e]),this.editDialog=!0},saveVillage:function(){var e=this,t=new FormData;t.append("id",this.village._id),t.append("name",this.village.name),t.append("parent",this.village.parent._id),t.append("type","Villages"),n.a.post(Ft+"/editLocation",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.alertSuccess=!0,e.alertMsg="Changes saved successfully",e.editDialog=!1,e.getVillages()})).catch((function(t){e.alertFail=!0,e.alertMsg="An error occured and changes were not saved",e.editDialog=!1}))},confirmDelete:function(e){this.village={},this.village=it.a.all([e]),this.deleteDialog=!0},deleteVillage:function(){var e=this;n.a.delete(Ft+"/deleteLocation/".concat(this.village._id,"/Villages")).then((function(t){e.alertSuccess=!0,e.alertMsg="Village deleted successfully",e.deleteDialog=!1,e.getVillages()})).catch((function(t){e.alertFail=!0,e.alertMsg="An error occured while deleting village",e.deleteDialog=!1}))}},computed:{locations:function(){return[{name:"Parent",children:this.tree}]}},watch:{active:function(e,t){0!==e.length&&(this.village.parent.name=e[0].name,this.village.parent.parent=e[0].parent,this.village.parent._id=e[0].id)}},created:function(){this.getVillages(),this.lastLocationType="facility"}},Tt=Ct,At=Object(f["a"])(Tt,Dt,St,!1,null,null,null),qt=At.exports;_()(At,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardText:$["b"],VContainer:z["a"],VDataTable:G["a"],VDialog:k["a"],VFlex:Q["a"],VIcon:D["a"],VLayout:X["a"],VSpacer:q["a"],VTextField:Z["a"],VToolbar:N["a"],VToolbarTitle:O["b"],VTreeview:me["a"]});var Nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xl":""}},[e.deleteDialog?a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v("\n          Confirm deleting\n        ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.deleteDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[e._v("\n        Are you sure you want to delete "+e._s(e.cha.firstName)+" "+e._s(e.cha.surname)+" ?\n      ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.deleteCHA(t)}}},[e._v("Ok")])],1)],1)],1):e._e(),e.editDialog?a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n          Editing "+e._s(e.cha.firstName)+" "+e._s(e.cha.surname)+"\n        ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,box:"",color:"deep-purple",label:"First Name*"},on:{blur:function(t){return e.$v.firstName.$touch()},change:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Middle Names"},model:{value:e.otherName,callback:function(t){e.otherName=t},expression:"otherName"}}),a("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,box:"",color:"deep-purple",label:"Surname*"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),a("v-text-field",{attrs:{required:"","error-messages":e.phone1Errors,box:"",color:"deep-purple",label:"Mobile Phone 1*"},on:{blur:function(t){return e.$v.phone1.$touch()},change:function(t){return e.$v.phone1.$touch()}},model:{value:e.phone1,callback:function(t){e.phone1=t},expression:"phone1"}}),a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Mobile Phone 2"},model:{value:e.phone2,callback:function(t){e.phone2=t},expression:"phone2"}}),a("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,box:"",color:"deep-purple",label:"Email*"},on:{blur:function(t){return e.$v.email.$touch()},change:function(t){return e.$v.email.$touch()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v("\n            Village "+e._s(e.cha.village.name)+"\n            "),a("v-treeview",{staticClass:"grey lighten-5",attrs:{active:e.active,open:e.open,items:e.locations,"load-children":e.getLocation,activatable:"","return-object":"","active-class":"primary--text","open-on-click":"",transition:""},on:{"update:active":function(t){e.active=t},"update:open":function(t){e.open=t}},scopedSlots:e._u([{key:"prepend",fn:function(t){var r=t.item,s=t.active;return[r.children?e._e():a("v-icon",{attrs:{color:s?"primary":""}},[e._v("\n                  mdi-account\n                ")])]}}],null,!1,1547280211)})],1)],1)],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel\n        ")],1),a("v-spacer"),a("v-btn",{attrs:{disabled:e.$v.$invalid||!e.cha.village.name,color:"primary",dark:""},nativeOn:{click:function(t){return e.saveEdit()}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save\n        ")],1)],1)],1)],1):e._e(),a("v-layout",{attrs:{column:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),a("center",[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs7:""}},[e._v("\n            List of CHAs\n          ")]),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",color:"primary"},model:{value:e.searchCHA,callback:function(t){e.searchCHA=t},expression:"searchCHA"}})],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.chas,"pagination.sync":"pagination","item-key":"_id",loading:e.loading,search:e.searchCHA},scopedSlots:e._u([{key:"items",fn:function(t){return a("tr",{key:t.item._id},[a("td",["Admin"==e.$store.state.auth.role?a("v-btn",{attrs:{color:"success",icon:""},on:{click:function(a){return e.editCHA(t.item)}}},[a("v-icon",[e._v("edit")])],1):e._e()],1),a("td",[e._v(e._s(t.item.firstName))]),a("td",[e._v(e._s(t.item.surname))]),a("td",[e._v(e._s(t.item.otherName))]),a("td",[e._v(e._s(t.item.phone1))]),a("td",[e._v(e._s(t.item.phone2))]),a("td",[e._v(e._s(t.item.email))]),a("td",[e._v(e._s(t.item.odkUsername))]),a("td",[e._v(e._s(t.item.village.name))])])}}])})],1)],1)],1)],1)},Ot=[],Mt="",Et={mixins:[Ue],validations:{phone1:{required:ne["required"],integer:ne["integer"],minLength:Object(ne["minLength"])(10),maxLength:Object(ne["maxLength"])(10),minValue:Object(ne["minValue"])(0)},email:{required:ne["required"],email:ne["email"]},firstName:{required:ne["required"]},surname:{required:ne["required"]}},data:function(){return{searchCHA:"",active:[],open:[],tree:[],firstName:"",otherName:"",surname:"",email:"",phone1:"",phone2:"",loading:!1,deleteDialog:!1,editDialog:!1,alertMsg:"",alertFail:!1,alertSuccess:!1,chas:[],cha:{},headers:[{sortable:!1,align:"left"},{text:"First Name",value:"firstName"},{text:"Surname",value:"surname"},{text:"Other Name",value:"otherName"},{text:"Mobile Phone 1",value:"phone1"},{text:"Mobile Phone 2",value:"phone2"},{text:"Email",value:"email"},{text:"ODK Username",value:"odkUsername"},{text:"Village",value:"village"}]}},methods:{getCHA:function(){var e=this;this.loading=!0,n.a.get(Mt+"/getCHAById").then((function(t){e.loading=!1,e.chas=t.data})).catch((function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription="An error occured while getting CHA"}))},editCHA:function(e){for(var t in this.cha={},this.cha=it.a.all([e]),this.editDialog=!0,this.cha)"null"!==this.cha[t]&&"undefined"!==this.cha[t]&&(this.$data[t]=this.cha[t])},saveEdit:function(){var e=this;for(var t in this.cha)this.cha[t]=this.$data[t];var a=new FormData;this.active.length>0&&(this.cha.village._id=this.active[0].id),a.append("cha",JSON.stringify(this.cha)),n.a.post(Mt+"/editCHA",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.alertSuccess=!0,e.alertMsg="Changes saved successfully",e.editDialog=!1,e.getCHA()})).catch((function(t){e.alertFail=!0,e.alertMsg="An error occured and changes were not saved",e.editDialog=!1}))}},computed:{locations:function(){return[{name:"Parent*",children:this.tree}]},phone1Errors:function(){var e=[];return this.$v.phone1.$dirty?(this.$v.phone1.required||e.push("Phone 1 is required"),this.$v.phone1.$invalid&&e.push("Phone 1 is in wrong format"),e):e},emailErrors:function(){var e=[];return this.$v.email.$dirty?(this.$v.email.required||e.push("Email is required"),this.$v.email.$invalid&&e.push("Email is in wrong format"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstName.$dirty?(!this.$v.firstName.required&&e.push("Firstname is required"),e):e}},created:function(){this.getCHA(),this.lastLocationType="village"}},Pt=Et,Lt=Object(f["a"])(Pt,Nt,Ot,!1,null,null,null),Rt=Lt.exports;_()(Lt,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardText:$["b"],VContainer:z["a"],VDataTable:G["a"],VDialog:k["a"],VFlex:Q["a"],VIcon:D["a"],VLayout:X["a"],VSpacer:q["a"],VTextField:Z["a"],VToolbar:N["a"],VToolbarTitle:O["b"],VTreeview:me["a"]});var Ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{"grid-list-xl":""}},[e.deleteDialog?a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"error",dark:""}},[a("v-toolbar-title",[e._v("\n          Confirm deleting\n        ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.deleteDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[e._v("\n        Are you sure you want to delete "+e._s(e.hfs.firstName)+" "+e._s(e.hfs.surname)+" ?\n      ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},nativeOn:{click:function(t){return e.deleteCHA(t)}}},[e._v("Ok")])],1)],1)],1):e._e(),e.editDialog?a("v-dialog",{attrs:{persistent:"",width:"530px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[a("v-card",{attrs:{width:"530px"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[e._v("\n          Editing "+e._s(e.hfs.firstName)+" "+e._s(e.hfs.surname)+"\n        ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",[e._v("close")])],1)],1),a("v-card-text",[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,box:"",color:"deep-purple",label:"First Name*"},on:{blur:function(t){return e.$v.firstName.$touch()},change:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Middle Names"},model:{value:e.otherName,callback:function(t){e.otherName=t},expression:"otherName"}}),a("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,box:"",color:"deep-purple",label:"Surname*"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),a("v-text-field",{attrs:{required:"","error-messages":e.phone1Errors,box:"",color:"deep-purple",label:"Mobile Phone 1*"},on:{blur:function(t){return e.$v.phone1.$touch()},change:function(t){return e.$v.phone1.$touch()}},model:{value:e.phone1,callback:function(t){e.phone1=t},expression:"phone1"}}),a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Mobile Phone 2"},model:{value:e.phone2,callback:function(t){e.phone2=t},expression:"phone2"}}),a("v-text-field",{attrs:{required:"","error-messages":e.emailErrors,box:"",color:"deep-purple",label:"Email*"},on:{blur:function(t){return e.$v.email.$touch()},change:function(t){return e.$v.email.$touch()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v("\n            Facility "+e._s(e.hfs.facility.name)+"\n            "),a("v-treeview",{staticClass:"grey lighten-5",attrs:{active:e.active,open:e.open,items:e.locations,"load-children":e.getLocation,activatable:"","return-object":"","active-class":"primary--text","open-on-click":"",transition:""},on:{"update:active":function(t){e.active=t},"update:open":function(t){e.open=t}},scopedSlots:e._u([{key:"prepend",fn:function(t){var r=t.item,s=t.active;return[r.children?e._e():a("v-icon",{attrs:{color:s?"primary":""}},[e._v("\n                  mdi-account\n                ")])]}}],null,!1,1547280211)})],1)],1)],1),a("v-card-actions",{staticStyle:{float:"center"}},[a("v-btn",{staticStyle:{color:"white"},attrs:{color:"error"},nativeOn:{click:function(t){e.editDialog=!1}}},[a("v-icon",{attrs:{dark:"",left:""}},[e._v("cancel")]),e._v("Cancel\n        ")],1),a("v-spacer"),a("v-btn",{attrs:{disabled:e.$v.$invalid||!e.hfs.facility.name,color:"primary",dark:""},nativeOn:{click:function(t){return e.saveEdit()}}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("Save\n        ")],1)],1)],1)],1):e._e(),a("v-layout",{attrs:{column:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n      "+e._s(e.alertMsg)+"\n    ")]),a("center",[a("v-flex",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs7:""}},[e._v("\n            List of HFSs\n          ")]),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",color:"primary"},model:{value:e.searchHFS,callback:function(t){e.searchHFS=t},expression:"searchHFS"}})],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.hfss,"pagination.sync":"pagination","item-key":"_id",loading:e.loading,search:e.searchHFS},scopedSlots:e._u([{key:"items",fn:function(t){return a("tr",{key:t.item._id},[a("td",["Admin"==e.$store.state.auth.role?a("v-btn",{attrs:{color:"success",icon:""},on:{click:function(a){return e.editHFS(t.item)}}},[a("v-icon",[e._v("edit")])],1):e._e()],1),a("td",[e._v(e._s(t.item.firstName))]),a("td",[e._v(e._s(t.item.surname))]),a("td",[e._v(e._s(t.item.otherName))]),a("td",[e._v(e._s(t.item.phone1))]),a("td",[e._v(e._s(t.item.phone2))]),a("td",[e._v(e._s(t.item.email))]),a("td",[e._v(e._s(t.item.facility.name))])])}}])})],1)],1)],1)],1)},jt=[],Ut="",It={mixins:[Ue],validations:{phone1:{required:ne["required"],integer:ne["integer"],minLength:Object(ne["minLength"])(10),maxLength:Object(ne["maxLength"])(10),minValue:Object(ne["minValue"])(0)},email:{required:ne["required"],email:ne["email"]},firstName:{required:ne["required"]},surname:{required:ne["required"]}},data:function(){return{searchHFS:"",active:[],open:[],tree:[],firstName:"",otherName:"",surname:"",email:"",phone1:"",phone2:"",loading:!1,deleteDialog:!1,editDialog:!1,alertMsg:"",alertFail:!1,alertSuccess:!1,hfss:[],hfs:{},headers:[{sortable:!1,align:"left"},{text:"First Name",value:"firstName"},{text:"Surname",value:"surname"},{text:"Other Name",value:"otherName"},{text:"Mobile Phone 1",value:"phone1"},{text:"Mobile Phone 2",value:"phone2"},{text:"Email",value:"email"},{text:"Facility",value:"facility"}]}},methods:{getHFS:function(){var e=this;this.loading=!0,n.a.get(Ut+"/getHFSById").then((function(t){e.loading=!1,e.hfss=t.data})).catch((function(t){e.$store.state.dialogError=!0,e.$store.state.errorTitle="Error",e.$store.state.errorDescription="An error occured while getting HFS"}))},editHFS:function(e){for(var t in this.hfs={},this.hfs=it.a.all([e]),this.editDialog=!0,this.hfs)"null"!==this.hfs[t]&&"undefined"!==this.hfs[t]&&(this.$data[t]=this.hfs[t])},saveEdit:function(){var e=this;for(var t in this.hfs)this.hfs[t]=this.$data[t];var a=new FormData;this.active.length>0&&(this.hfs.facility._id=this.active[0].id),a.append("hfs",JSON.stringify(this.hfs)),n.a.post(Ut+"/editHFS",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.alertSuccess=!0,e.alertMsg="Changes saved successfully",e.editDialog=!1,e.getHFS()})).catch((function(t){e.alertFail=!0,e.alertMsg="An error occured and changes were not saved",e.editDialog=!1}))}},computed:{locations:function(){return[{name:"Parent*",children:this.tree}]},phone1Errors:function(){var e=[];return this.$v.phone1.$dirty?(this.$v.phone1.required||e.push("Phone 1 is required"),this.$v.phone1.$invalid&&e.push("Phone 1 is in wrong format"),e):e},emailErrors:function(){var e=[];return this.$v.email.$dirty?(this.$v.email.required||e.push("Email is required"),this.$v.email.$invalid&&e.push("Email is in wrong format"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstName.$dirty?(!this.$v.firstName.required&&e.push("Firstname is required"),e):e}},created:function(){this.getHFS(),this.lastLocationType="facility"}},Bt=It,Jt=Object(f["a"])(Bt,Ht,jt,!1,null,null,null),Yt=Jt.exports;_()(Jt,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardText:$["b"],VContainer:z["a"],VDataTable:G["a"],VDialog:k["a"],VFlex:Q["a"],VIcon:D["a"],VLayout:X["a"],VSpacer:q["a"],VTextField:Z["a"],VToolbar:N["a"],VToolbarTitle:O["b"],VTreeview:me["a"]});var Wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},zt=[],Gt={mounted:function(){this.$store.state.auth.token="",v.a.remove("token"),v.a.remove("userID"),v.a.remove("role"),v.a.remove("username"),this.$router.push("login")}},Kt=Gt,Qt=Object(f["a"])(Kt,Wt,zt,!1,null,null,null),Xt=Qt.exports,Zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("center",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}}),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{attrs:{type:"error",value:e.authStatus}},[e._v("\n          Authentication Failed\n        ")])],1)],1),a("v-card",{attrs:{width:"430px",hover:""}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{color:"white"},attrs:{color:"primary"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:"","text-xs-left":""}},[a("v-icon",{attrs:{"x-large":"",color:"white"}},[e._v("lock")])],1),a("v-flex",{attrs:{xs9:"","text-xs-right":""}},[a("b",[e._v("Login")])])],1)],1)],1),a("v-card-text",[a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,box:"",color:"deep-purple",label:"Username"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.username.$touch()},change:function(t){return e.$v.username.$touch()}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,box:"",type:"password",color:"deep-purple",label:"Password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.authenticate()},blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-toolbar",[a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"success",depressed:""},on:{click:function(t){return e.authenticate()}}},[e._v("Login")])],1)],1)],1)],1)],1)},ea=[],ta="",aa={validations:{username:{required:ne["required"]},password:{required:ne["required"]}},data:function(){return{username:"",password:"",authStatus:!1,signupEnabled:!1}},methods:{authenticate:function(){var e=this,t=new FormData;t.append("username",this.username),t.append("password",this.password),n.a.post(ta+"/authenticate/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$store.state.auth.token=t.data.token,e.$store.state.auth.username=e.username,e.$store.state.auth.userID=t.data.userID,e.$store.state.auth.role=t.data.role,v.a.config("30d"),v.a.set("token",e.$store.state.auth.token,"infinity"),v.a.set("userID",e.$store.state.auth.userID,"infinity"),v.a.set("role",e.$store.state.auth.role,"infinity"),v.a.set("username",e.$store.state.auth.username,"infinity"),e.$store.state.auth.role=t.data.role,t.data.token?(e.$router.push({name:"Dashboard"}),e.$store.state.denyAccess=!1):e.authStatus=!0})).catch((function(e){e.hasOwnProperty("response")&&console.log(e.response.data.error)}))}},computed:{usernameErrors:function(){var e=[];return this.$v.username.$dirty?(!this.$v.username.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e}}},ra=aa,sa=Object(f["a"])(ra,Zt,ea,!1,null,null,null),na=sa.exports;_()(sa,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardText:$["b"],VCardTitle:de["a"],VContainer:z["a"],VFlex:Q["a"],VForm:ve["a"],VIcon:D["a"],VLayout:X["a"],VSpacer:q["a"],VTextField:Z["a"],VToolbar:N["a"]});var ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n    "+e._s(e.alertMsg)+"\n  ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n    "+e._s(e.alertMsg)+"\n  ")]),a("v-card",{attrs:{color:"cyan lighten-5"}},[a("v-card-title",{attrs:{"primary-title":""}},[a("v-toolbar",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{color:"white"}},[e._v("\n        Users List\n        "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.searchUsers,callback:function(t){e.searchUsers=t},expression:"searchUsers"}})],1)],1),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.usersHeader,items:e.users,search:e.searchUsers,dark:"",loading:e.$store.state.loadingusers},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.firstName))]),a("td",[e._v(e._s(t.item.surname))]),a("td",[e._v(e._s(t.item.otherName))]),a("td",[e._v(e._s(t.item.userName))]),a("td",[e._v(e._s(t.item.role.name))]),a("td",[e._v(e._s(t.item.status))]),a("td",["Active"===t.item.status?a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(a){return e.accountAction("Inactive",t.item)}}},[e._v("Deactivate")]):a("v-btn",{attrs:{small:"",color:"success"},on:{click:function(a){return e.accountAction("Active",t.item)}}},[e._v("Activate")]),a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(a){return e.accountAction("reset",t.item)}}},[a("v-icon",{attrs:{left:""}},[e._v("refresh")]),e._v(" Reset Password")],1)],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)],1)],1)},oa=[],la="",ca={data:function(){return{usersHeader:[{text:"Firstname",value:"firstName"},{text:"Surname",value:"surname"},{text:"Othername",value:"otherName"},{text:"User Name",value:"username"},{text:"Role",value:"role"},{text:"Status",value:"status"}],users:[],loadingUsers:!1,searchUsers:"",alertSuccess:!1,alertFail:!1,alertMsg:""}},methods:{getUsers:function(){var e=this,t=new FormData;t.append("username",this.username),t.append("password",this.password),this.loadingUsers=!0,n.a.get(la+"/getUsers/").then((function(t){e.loadingUsers=!1,e.users=t.data})).catch((function(t){e.loadingUsers=!1,t.hasOwnProperty("response")&&console.log(t.response.data.error)}))},accountAction:function(e,t){var a=this,r=t._id,s=new FormData;s.append("id",r),"Active"===e||"Inactive"===e?(s.append("status",e),n.a.post(la+"/changeAccountStatus",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){a.alertSuccess=!0,"Active"===e?a.alertMsg="Account activated successfully":"Inactive"===e&&(a.alertMsg="Account deactivated successfully"),a.getUsers()})).catch((function(e){console.log(JSON.stringify(e)),a.alertFail=!0,a.alertMsg="Action failed"}))):"reset"===e&&(s.append("surname",t.surname),n.a.post(la+"/resetPassword",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a.alertSuccess=!0,a.alertMsg="Password reseted successfully",a.getUsers()})).catch((function(e){console.log(JSON.stringify(e)),a.alertFail=!0,a.alertMsg="Action failed"})))}},created:function(){this.getUsers()}},da=ca,ua=Object(f["a"])(da,ia,oa,!1,null,null,null),va=ua.exports;_()(ua,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardText:$["b"],VCardTitle:de["a"],VContainer:z["a"],VDataTable:G["a"],VIcon:D["a"],VProgressLinear:A["a"],VSpacer:q["a"],VTextField:Z["a"],VToolbar:N["a"]});var pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Add New User")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.firstnameErrors,box:"",color:"deep-purple",label:"First Name"},on:{blur:function(t){return e.$v.firstName.$touch()},change:function(t){return e.$v.firstName.$touch()}},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),a("v-text-field",{attrs:{box:"",color:"deep-purple",label:"Middle Names"},model:{value:e.otherName,callback:function(t){e.otherName=t},expression:"otherName"}}),a("v-text-field",{attrs:{required:"","error-messages":e.surnameErrors,box:"",color:"deep-purple",label:"Surname"},on:{blur:function(t){return e.$v.surname.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.surname,callback:function(t){e.surname=t},expression:"surname"}}),a("v-text-field",{attrs:{required:"","error-messages":e.usernameErrors,box:"",color:"deep-purple",label:"Username"},on:{blur:function(t){return e.$v.userName.$touch()},change:function(t){return e.$v.surname.$touch()}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",box:"",color:"deep-purple",label:"Password"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",box:"",color:"deep-purple",label:"Re-type Password"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}}),a("v-select",{attrs:{required:"",items:e.roles,"single-line":"",clearable:"","error-messages":e.roleErrors,box:"",label:"Role"},on:{blur:function(t){return e.$v.role.$touch()},change:function(t){return e.$v.role.$touch()}},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.$refs.form.reset()}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.addUser()}}},[a("v-icon",{attrs:{left:""}},[e._v("how_to_reg")]),e._v("Add")],1)],1)],1)],1),a("v-spacer")],1)],1)},ma=[],ha="",fa={validations:{userName:{required:ne["required"]},retype_password:{required:ne["required"]},password:{required:ne["required"]},role:{required:ne["required"]},firstName:{required:ne["required"]},surname:{required:ne["required"]}},data:function(){return{firstName:"",otherName:"",surname:"",userName:"",password:"",retype_password:"",role:"",customFields:[],alertFail:!1,alertSuccess:!1,alertMsg:"",roles:[]}},methods:{addUser:function(){var e=this;if(this.password!==this.retype_password)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Password mismatch");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Saving User";var t=new FormData;for(var a in t.append("firstName",this.firstName),t.append("otherName",this.otherName),t.append("password",this.password),t.append("userName",this.userName),t.append("surname",this.surname),t.append("role",this.role),this.customFields)t.append(a,this.customFields[a]);n.a.post(ha+"/addUser/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var t=Object.keys(e.$v.$params),a=0,r=t;a<r.length;a++){var s=r[a];e.$v[s].$reset()}e.$refs.form.reset(),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.alertMsg="User added successfully"})).catch((function(t){e.$store.state.dynamicProgress=!1,e.alertFail=!0,e.alertMsg="This user was not added, ensure userName is not used",console.log(t.response.data.error)}))},getRoles:function(){var e=this;n.a.get(ha+"/getRoles").then((function(t){var a=!0,r=!1,s=void 0;try{for(var n,i=t.data[Symbol.iterator]();!(a=(n=i.next()).done);a=!0){var o=n.value;e.roles.push({text:o.name,value:o._id})}}catch(l){r=!0,s=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw s}}})).catch((function(e){console.log(e.response.data)}))}},computed:{codeErrors:function(){var e=[];return this.$v.code.$dirty?(!this.$v.code.required&&e.push("Code is required"),e):e},firstnameErrors:function(){var e=[];return this.$v.firstName.$dirty?(!this.$v.firstName.required&&e.push("First Name is required"),e):e},surnameErrors:function(){var e=[];return this.$v.surname.$dirty?(!this.$v.surname.required&&e.push("Surname is required"),e):e},usernameErrors:function(){var e=[];return this.$v.userName.$dirty?(!this.$v.userName.required&&e.push("Username is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e},roleErrors:function(){var e=[];return this.$v.role.$dirty?(!this.$v.role.required&&e.push("Role is required"),e):e}},created:function(){this.getRoles()}},ga=fa,_a=Object(f["a"])(ga,pa,ma,!1,null,null,null),ya=_a.exports;_()(_a,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardTitle:de["a"],VContainer:z["a"],VDivider:ue["a"],VFlex:Q["a"],VForm:ve["a"],VIcon:D["a"],VLayout:X["a"],VSelect:Ee["a"],VSpacer:q["a"],VSystemBar:pe["a"],VTextField:Z["a"],VToolbar:N["a"]});var ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-spacer"),a("v-flex",{attrs:{xs6:""}},[a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"success",dismissible:"",transition:"scale-transition"},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-alert",{staticStyle:{width:"500px"},attrs:{type:"error",dismissible:"",transition:"scale-transition"},model:{value:e.alertFail,callback:function(t){e.alertFail=t},expression:"alertFail"}},[e._v("\n        "+e._s(e.alertMsg)+"\n      ")]),a("v-card",{staticClass:"mx-auto",staticStyle:{"max-width":"500px"}},[a("v-system-bar",{attrs:{color:"deep-purple darken-4",dark:""}}),a("v-toolbar",{attrs:{color:"deep-purple accent-4",cards:"",dark:"",flat:""}},[a("v-card-title",{staticClass:"title font-weight-regular"},[e._v("Change Password")])],1),a("v-form",{ref:"form",staticClass:"pa-3 pt-4"},[a("v-text-field",{attrs:{required:"","error-messages":e.oldPasswordErrors,type:"password",box:"",color:"deep-purple",label:"Old Password"},on:{blur:function(t){return e.$v.oldPassword.$touch()},change:function(t){return e.$v.oldPassword.$touch()}},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),a("v-text-field",{attrs:{required:"","error-messages":e.passwordErrors,type:"password",box:"",color:"deep-purple",label:"Password"},on:{blur:function(t){return e.$v.password.$touch()},change:function(t){return e.$v.password.$touch()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{required:"","error-messages":e.retype_passwordErrors,type:"password",box:"",color:"deep-purple",label:"Re-type Password"},on:{blur:function(t){return e.$v.retype_password.$touch()},change:function(t){return e.$v.retype_password.$touch()}},model:{value:e.retype_password,callback:function(t){e.retype_password=t},expression:"retype_password"}})],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{flat:""},on:{click:function(t){return e.$refs.form.reset()}}},[a("v-icon",[e._v("clear")]),e._v("Clear\n          ")],1),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:e.$v.$invalid,color:"deep-purple accent-4",depressed:""},on:{click:function(t){return e.verifyPassword()}}},[a("v-icon",{attrs:{left:""}},[e._v("how_to_reg")]),e._v("Change")],1)],1)],1)],1),a("v-spacer")],1)],1)},xa=[],$a="",wa={validations:{retype_password:{required:ne["required"]},password:{required:ne["required"]},oldPassword:{required:ne["required"]}},data:function(){return{oldPassword:"",password:"",retype_password:"",alertFail:!1,alertSuccess:!1,alertMsg:""}},methods:{changePassword:function(){var e=this;if(this.password!==this.retype_password)return this.$store.state.dialogError=!0,this.$store.state.errorTitle="Error",void(this.$store.state.errorDescription="Password mismatch");this.$store.state.dynamicProgress=!0,this.$store.state.progressTitle="Changing Password";var t=new FormData;t.append("password",this.password),t.append("id",this.$store.state.auth.userID),n.a.post($a+"/changePassword/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){for(var t=Object.keys(e.$v.$params),a=0,r=t;a<r.length;a++){var s=r[a];e.$v[s].$reset()}e.$refs.form.reset(),e.$store.state.dynamicProgress=!1,e.alertSuccess=!0,e.alertMsg="Password changed successfully"})).catch((function(t){e.$store.state.dynamicProgress=!1,e.alertFail=!0,e.alertMsg="Password change failed",console.log(t.response.data.error)}))},verifyPassword:function(){var e=this,t=new FormData;t.append("username",this.$store.state.auth.username),t.append("password",this.oldPassword),n.a.post($a+"/authenticate/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){t.data.token?e.changePassword():(e.alertFail=!0,e.alertMsg="Wrong Old Password")})).catch((function(e){console.log(JSON.stringify(e))}))}},computed:{oldPasswordErrors:function(){var e=[];return this.$v.oldPassword.$dirty?(!this.$v.oldPassword.required&&e.push("Old Password is required"),e):e},passwordErrors:function(){var e=[];return this.$v.password.$dirty?(!this.$v.password.required&&e.push("Password is required"),e):e},retype_passwordErrors:function(){var e=[];return this.$v.retype_password.$dirty?(!this.$v.retype_password.required&&e.push("Re-type Password"),e):e}}},ka=wa,Va=Object(f["a"])(ka,ba,xa,!1,null,null,null),Da=Va.exports;_()(Va,{VAlert:ce["a"],VBtn:b["a"],VCard:x["a"],VCardActions:$["a"],VCardTitle:de["a"],VContainer:z["a"],VDivider:ue["a"],VFlex:Q["a"],VForm:ve["a"],VIcon:D["a"],VLayout:X["a"],VSpacer:q["a"],VSystemBar:pe["a"],VTextField:Z["a"],VToolbar:N["a"]}),r["a"].use(L["a"]);var Sa=new L["a"]({routes:[{path:"/dashboard",name:"Dashboard",component:te},{path:"/addCHA",name:"AddCHA",component:fe},{path:"/addHFS",name:"AddHFS",component:we},{path:"/addRegion",name:"AddRegion",component:Te},{path:"/addDistrict",name:"AddDistrict",component:Le},{path:"/addFacility",name:"AddFacility",component:We},{path:"/addVillage",name:"AddVillage",component:et},{path:"/addUser",name:"AddUser",component:ya},{path:"/UsersList",name:"UsersList",component:va},{path:"/RegionsReport",name:"RegionsReport",component:ut},{path:"/DistrictsReport",name:"DistrictsReport",component:_t},{path:"/FacilitiesReport",name:"FacilitiesReport",component:Vt},{path:"/VillagesReport",name:"VillagesReport",component:qt},{path:"/CHAReport",name:"CHAReport",component:Rt},{path:"/HFSReport",name:"HFSReport",component:Yt},{path:"/ChangePassword",name:"ChangePassword",component:Da},{path:"/Login",name:"Login",component:na},{path:"/Logout",name:"Logout",component:Xt}]});Sa.beforeEach((function(e,t,a){H.state.auth.token||v.a.get("token")&&v.a.get("userID")?a():"/Login"!==e.path?a({path:"/Login"}):a()}));var Fa=Sa,Ca=a("1dce"),Ta=a.n(Ca);r["a"].config.productionTip=!1,r["a"].use(Ta.a),new r["a"]({router:Fa,store:H,render:function(e){return e(P)}}).$mount("#app")}});
//# sourceMappingURL=app.82287f0b.js.map